<!-- DOCTYPE html -->
<html>
	<head>
		<meta name="author" content="Kelvin Abrokwa-Johnson">
		<script type="text/javascript" charset="utf-8" src="js/grade_calc.js"></script>
		<title>Grade Calculator</title>
	</head>
	<body>
		<h1>Grade Calculator</h1>
		<button typer="button" onclick="verifyWeights(weight_dict)">Verify Category Weighting</button>
		<p id="error_check"></p>

		<button type="button" onclick="main()">Calculate Averages</button>
		<br>
		<br>
		<table border="1">
			<tr>
				<td>Category</td>
				<td>Weight</td>
				<td>Current Average</td>
			</tr>
			<tr>
				<td>Exam Average</td>
				<td id="first_weight"></td>
				<td id="first"></td>
			</tr>
			<tr>
				<td>Quiz Average</td>
				<td id="second_weight"></td>
				<td id="second"></td>
			</tr>
			<tr>
				<td>Homework Average</td>
				<td id="third_weight"></td>
				<td id="third"></td>
			</tr>
			<tr>
				<td>Class Average</td>
				<td id="total_weight"></td>
				<td id="class_avg"></td>
			</tr>
		</table>
		<p>You need the grade below! Good Luck</p>
		<button type="button" onclick="getAnswer()">Get Grade Needed</button>
		<p id="output"></p>
		<script>
			
			// Check to see if percentages in associative array add up to 100
			function verifyWeights(weight_dictionary) {
				var total_percentage = 0;
				for (key in weight_dictionary) {
					total_percentage = total_percentage + weight_dictionary[key];
				}
				if (total_percentage == 100) {
					document.getElementById("error_check").innerHTML = "The percentages check out!";
				} else {
					document.getElementById("error_check").innerHTML = "Error: Percetage above or below 100"
				};
			};

			// Calculate average of all grages in a category
			function getAverage(list_of_grades) {
				var total = 0;
				for (i=0; i < list_of_grades.length; i++) {
					total = total + list_of_grades[i];
				}
				var average = total / list_of_grades.length;
				return average;
			};

			///// Program inputs ///////// Must take from user /////
			var weight_dict = {
				"exams" : 40,
				"quizzes" : 30,
				"homework" : 30
			};

			var grade_dict = {
				"exams" : [90,87],
				"quizzes" : [90,80,70,87],
				"homework" : [70,90,94,96,100,85]
			};

			var avg_dict = {
				"exams" : 88.5,
				"quizzes" : 81.75,
				"homework" : 89.167
			};

			var target_grade = 86;
			var cat_choice = "exams"; 
			///////////////////////////////////////////////////////////

			function calculateClassAverage(weight_dictionary, average_dictionary) {
				var class_average = 0;
				for (key in average_dictionary) {
					partial = (weight_dictionary[key] / 100) * average_dictionary[key];
					class_average = class_average + partial;
				}
				return class_average;
			};

			function main() {
				document.getElementById("first").innerHTML = getAverage(grade_dict.exams);
				document.getElementById("first_weight").innerHTML = weight_dict["exams"] + "%"
				document.getElementById("second").innerHTML = getAverage(grade_dict.quizzes);
				document.getElementById("second_weight").innerHTML = weight_dict["quizzes"] + "%"
				document.getElementById("third").innerHTML = getAverage(grade_dict.homework);
				document.getElementById("third_weight").innerHTML = weight_dict["homework"] + "%"
				document.getElementById("class_avg").innerHTML = calculateClassAverage(weight_dict, avg_dict);
				document.getElementById("total_weight").innerHTML = "100%"

			}
			class_avg = calculateClassAverage(weight_dict, avg_dict);
			var formula1 = ( target_grade - ( class_avg - (avg_dict[cat_choice] * (weight_dict[cat_choice] / 100) ) ) );
			var formula2 = ( ( grade_dict[cat_choice].length + 1 ) / ( weight_dict[cat_choice] / 100 ) );
			var formula3 = (avg_dict[cat_choice] * grade_dict[cat_choice].length);
			
			var output =  formula1 * formula2 - formula3 ;

			function getAnswer() {
				document.getElementById("output").innerHTML = output;
			};
		</script>
	</body>
</html>